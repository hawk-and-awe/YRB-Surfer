<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>THE GRAVEYARD ‚Äî YouTube's Recycle Bin Surfer</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&family=Share+Tech+Mono&display=swap');
  :root{--crt-green:#39ff14;--crt-amber:#ffb000;--crt-blue:#00d4ff;--crt-red:#ff6b6b;--bg-dark:#0a0a0a;--tv-body:#2a2118;--tv-body-light:#3d3127;}
  *{margin:0;padding:0;box-sizing:border-box;}
  html,body{height:100%;overflow-x:hidden;overflow-y:auto;}
  body{background:var(--bg-dark);font-family:'VT323',monospace;color:var(--crt-green);display:flex;flex-direction:column;align-items:center;min-height:100vh;padding-bottom:2rem;}
  body::before{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(57,255,20,0.015) 2px,rgba(57,255,20,0.015) 4px),radial-gradient(ellipse at 50% 50%,#111,#050505);z-index:0;pointer-events:none;}
  .page-vignette{position:fixed;inset:0;background:radial-gradient(ellipse at center,transparent 50%,rgba(0,0,0,0.6) 100%);pointer-events:none;z-index:0;}

  /* FILE WARNING */
  #file-warning{position:fixed;inset:0;z-index:99999;background:#050505;display:none;flex-direction:column;align-items:center;justify-content:center;padding:2rem;}
  #file-warning.active{display:flex;}
  #file-warning h1{font-family:'Press Start 2P',monospace;font-size:clamp(0.5rem,2vw,0.9rem);color:#ff4444;text-shadow:0 0 10px rgba(255,0,0,0.3);margin-bottom:1rem;text-align:center;line-height:1.8;}
  #file-warning p{font-family:'VT323',monospace;font-size:clamp(1rem,2.5vw,1.4rem);color:#888;text-align:center;max-width:600px;line-height:1.6;margin-bottom:0.5rem;}
  #file-warning code{display:block;background:#111;border:1px solid #333;padding:1rem 1.5rem;margin:1rem 0;font-family:'Share Tech Mono',monospace;font-size:clamp(0.8rem,2vw,1.1rem);color:var(--crt-green);letter-spacing:1px;border-radius:4px;user-select:all;}
  #file-warning .small{font-family:'Share Tech Mono',monospace;font-size:0.85rem;color:#555;margin-top:1rem;max-width:500px;text-align:center;line-height:1.5;}
  #file-warning .small a{color:var(--crt-blue);}

  /* SETUP */
  #setup-screen{z-index:1;background:var(--bg-dark);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;flex:1;width:100%;min-height:60vh;transition:opacity 0.8s ease;}
  #setup-screen.hidden{opacity:0;pointer-events:none;position:absolute;height:0;min-height:0;overflow:hidden;padding:0;}
  #setup-screen h1{font-family:'Press Start 2P',monospace;font-size:clamp(0.65rem,2.5vw,1.1rem);color:var(--crt-green);text-shadow:0 0 10px var(--crt-green),0 0 30px rgba(57,255,20,0.3);margin-bottom:0.4rem;text-align:center;line-height:1.8;}
  .setup-subtitle{font-family:'VT323',monospace;font-size:clamp(1rem,3vw,1.5rem);color:var(--crt-amber);text-shadow:0 0 8px rgba(255,176,0,0.4);margin-bottom:1.5rem;text-align:center;opacity:0.8;}
  .setup-box{width:100%;max-width:560px;display:flex;flex-direction:column;align-items:center;gap:1rem;}
  .setup-box input{width:100%;padding:0.8rem 1rem;background:#111;border:1px solid #333;color:var(--crt-green);font-family:'Share Tech Mono',monospace;font-size:1rem;outline:none;letter-spacing:1px;}
  .setup-box input:focus{border-color:var(--crt-green);box-shadow:0 0 10px rgba(57,255,20,0.2);}
  .setup-box input::placeholder{color:#444;}
  .setup-btn{padding:0.7rem 2.5rem;background:transparent;border:1px solid var(--crt-green);color:var(--crt-green);font-family:'Press Start 2P',monospace;font-size:0.6rem;cursor:pointer;text-transform:uppercase;letter-spacing:2px;transition:all 0.2s;width:auto;}
  .setup-btn:hover{background:var(--crt-green);color:#000;box-shadow:0 0 20px rgba(57,255,20,0.4);}
  .setup-divider{display:flex;align-items:center;gap:1rem;width:100%;margin:0.5rem 0;}
  .setup-divider::before,.setup-divider::after{content:'';flex:1;height:1px;background:#222;}
  .setup-divider span{font-family:'VT323',monospace;color:#444;font-size:1rem;}
  .setup-free-btn{padding:0.7rem 2.5rem;background:transparent;border:1px solid var(--crt-amber);color:var(--crt-amber);font-family:'Press Start 2P',monospace;font-size:0.5rem;cursor:pointer;text-transform:uppercase;letter-spacing:2px;transition:all 0.2s;line-height:1.6;}
  .setup-free-btn:hover{background:var(--crt-amber);color:#000;box-shadow:0 0 20px rgba(255,176,0,0.4);}
  .setup-steps{max-width:560px;margin-top:1.5rem;font-family:'VT323',monospace;font-size:1.1rem;color:#666;line-height:1.8;text-align:left;}
  .setup-steps .step-num{color:var(--crt-green);}
  .setup-steps a{color:var(--crt-blue);text-decoration:none;}
  .setup-steps a:hover{text-decoration:underline;}
  .setup-steps .note{font-size:0.9rem;color:#444;margin-top:0.5rem;border-left:2px solid #333;padding-left:0.8rem;}
  .setup-error{font-family:'Share Tech Mono',monospace;font-size:0.85rem;color:#ff4444;margin-top:0.5rem;display:none;}
  .setup-error.visible{display:block;}
  .mode-badge{position:fixed;top:8px;right:12px;z-index:50;font-family:'Share Tech Mono',monospace;font-size:0.55rem;letter-spacing:1px;padding:3px 8px;border-radius:3px;border:1px solid #222;background:rgba(0,0,0,0.6);cursor:pointer;transition:all 0.2s;}
  .mode-badge:hover{border-color:#555;}
  .mode-badge.free{color:var(--crt-amber);border-color:rgba(255,176,0,0.2);}
  .mode-badge.api{color:var(--crt-green);border-color:rgba(57,255,20,0.2);}

  /* MAIN */
  #main-container{display:none;flex-direction:column;align-items:center;z-index:1;width:100%;flex:1;padding:1rem 1rem 0;}
  #main-container.active{display:flex;}

  /* TV */
  .tv-housing{position:relative;width:min(95vw,900px);flex-shrink:0;}
  .tv-outer{background:linear-gradient(160deg,var(--tv-body-light) 0%,var(--tv-body) 30%,#1f1810 100%);border-radius:22px 22px 14px 14px;padding:clamp(14px,3vw,28px);padding-bottom:clamp(8px,1.5vw,14px);box-shadow:0 8px 40px rgba(0,0,0,0.8),inset 0 1px 0 rgba(255,255,255,0.08),0 0 0 2px #111;position:relative;}
  .tv-outer::before{content:'';position:absolute;inset:0;border-radius:22px;background:repeating-linear-gradient(92deg,transparent,transparent 8px,rgba(0,0,0,0.05) 8px,rgba(0,0,0,0.05) 9px);pointer-events:none;}
  .tv-bezel{background:#0c0c0c;border-radius:12px;padding:6px;box-shadow:inset 0 0 30px rgba(0,0,0,0.9),inset 0 0 4px 2px #000;}
  .screen-container{position:relative;width:100%;padding-bottom:56.25%;background:#000;border-radius:8px 8px 0 0;overflow:hidden;}
  .screen-container::after{content:'';position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 1px,rgba(0,0,0,0.12) 1px,rgba(0,0,0,0.12) 2px);pointer-events:none;z-index:10;}
  .screen-container::before{content:'';position:absolute;inset:0;box-shadow:inset 0 0 80px rgba(0,0,0,0.6),inset 0 0 10px rgba(0,0,0,0.8);z-index:11;pointer-events:none;}
  .screen-glare{position:absolute;top:-10%;left:-10%;width:60%;height:60%;background:radial-gradient(ellipse,rgba(255,255,255,0.05) 0%,transparent 70%);z-index:12;pointer-events:none;transform:rotate(-15deg);}
  #yt-player-wrap{position:absolute;inset:0;z-index:5;transition:opacity 0.3s;}
  #yt-player{width:100%;height:100%;}
  #static-overlay{position:absolute;inset:0;z-index:8;pointer-events:none;opacity:0;transition:opacity 0.15s;}
  #static-overlay.active{opacity:1;}
  #static-canvas{width:100%;height:100%;}
  #channel-osd{position:absolute;top:8%;right:5%;z-index:15;font-family:'Press Start 2P',monospace;font-size:clamp(0.6rem,2.5vw,1.1rem);color:var(--crt-amber);text-shadow:2px 2px 0 rgba(0,0,0,0.8),0 0 10px rgba(255,176,0,0.4);opacity:0;transition:opacity 0.3s;pointer-events:none;}
  #channel-osd.visible{opacity:1;}
  #playlist-counter{position:absolute;top:17%;right:5%;z-index:15;font-family:'Share Tech Mono',monospace;font-size:clamp(0.4rem,1vw,0.55rem);color:#555;opacity:0;transition:opacity 0.3s;pointer-events:none;}
  #playlist-counter.visible{opacity:1;}
  #vol-osd{position:absolute;top:8%;left:5%;z-index:15;font-family:'Press Start 2P',monospace;font-size:clamp(0.35rem,1vw,0.5rem);color:var(--crt-green);text-shadow:0 0 8px rgba(57,255,20,0.4);opacity:0;transition:opacity 0.3s;pointer-events:none;}
  #vol-osd.visible{opacity:1;}
  #status-msg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:14;font-family:'VT323',monospace;font-size:clamp(1rem,3vw,1.5rem);color:var(--crt-green);text-shadow:0 0 10px var(--crt-green);text-align:center;pointer-events:none;opacity:0;transition:opacity 0.3s;}
  #status-msg.visible{opacity:1;}
  #power-off-screen{position:absolute;inset:0;z-index:20;background:#000;display:flex;align-items:center;justify-content:center;border-radius:8px 8px 0 0;cursor:pointer;opacity:0;pointer-events:none;transition:opacity 0.5s;}
  #power-off-screen.active{opacity:1;pointer-events:auto;}
  #power-off-screen .dot{width:4px;height:4px;background:rgba(255,255,255,0.3);border-radius:50%;animation:shrink-dot 1s ease forwards;}
  @keyframes shrink-dot{0%{width:100%;height:2px;background:white;border-radius:0;}50%{width:30%;height:2px;background:rgba(255,255,255,0.6);border-radius:0;}100%{width:4px;height:4px;background:rgba(255,255,255,0.2);border-radius:50%;}}

  /* INFO STRIP */
  .info-strip{background:#0a0a0a;border-top:1px solid #1a1a1a;border-radius:0 0 8px 8px;padding:clamp(6px,1.2vw,10px) clamp(10px,2vw,16px);display:flex;align-items:center;gap:clamp(8px,1.5vw,14px);min-height:clamp(36px,6vw,52px);}
  .info-text{flex:1;min-width:0;overflow:hidden;}
  .info-title{font-family:'VT323',monospace;font-size:clamp(0.85rem,2.2vw,1.3rem);color:#ccc;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.3;}
  .info-meta{font-family:'Share Tech Mono',monospace;font-size:clamp(0.45rem,1vw,0.6rem);color:#555;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
  .info-yt-link{flex-shrink:0;width:clamp(28px,4vw,36px);height:clamp(28px,4vw,36px);background:rgba(255,255,255,0.05);border:1px solid #222;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s;text-decoration:none;}
  .info-yt-link:hover{background:rgba(255,0,0,0.15);border-color:#c00;}
  .info-yt-link svg{width:60%;height:60%;}

  /* TV CONTROLS */
  .tv-controls{display:flex;align-items:center;justify-content:space-between;padding:clamp(6px,1.5vw,12px) clamp(10px,3vw,24px);gap:0.5rem;}
  .tv-brand{font-family:'Press Start 2P',monospace;font-size:clamp(0.25rem,0.8vw,0.4rem);color:#665840;letter-spacing:3px;text-transform:uppercase;white-space:nowrap;flex-shrink:0;}
  .controls-right{display:flex;align-items:center;gap:clamp(6px,1.2vw,12px);flex-wrap:nowrap;}
  .pwr-btn{width:clamp(24px,4vw,34px);height:clamp(24px,4vw,34px);background:linear-gradient(180deg,#3a3a3a,#1a1a1a);border:2px solid #444;border-radius:50%;color:#666;font-size:clamp(0.6rem,1.2vw,0.9rem);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.15s;user-select:none;}
  .pwr-btn:hover{border-color:#888;color:#aaa;}
  .power-led{width:6px;height:6px;border-radius:50%;background:#300;box-shadow:0 0 2px rgba(0,0,0,0.5);transition:all 0.3s;flex-shrink:0;}
  .power-led.on{background:#f00;box-shadow:0 0 6px #f00,0 0 12px rgba(255,0,0,0.4);}
  .ctrl-divider{width:1px;height:clamp(18px,3.5vw,30px);background:#2a2118;flex-shrink:0;}
  .vol-wrap{display:flex;align-items:center;gap:clamp(4px,0.8vw,8px);user-select:none;}
  .vol-label{font-family:'VT323',monospace;font-size:clamp(0.4rem,0.9vw,0.6rem);color:#665840;}
  .knob{width:clamp(26px,4.5vw,40px);height:clamp(26px,4.5vw,40px);background:radial-gradient(circle at 35% 35%,#555,#1a1a1a);border-radius:50%;border:2px solid #333;box-shadow:0 2px 6px rgba(0,0,0,0.5),inset 0 1px 0 rgba(255,255,255,0.1);cursor:grab;position:relative;}
  .knob:active{cursor:grabbing;}
  .knob::after{content:'';position:absolute;top:15%;left:50%;transform:translateX(-50%);width:2px;height:25%;background:#888;border-radius:1px;}
  .vol-num{font-family:'Share Tech Mono',monospace;font-size:clamp(0.45rem,1vw,0.6rem);color:#555;min-width:2em;text-align:center;}
  .ch-btn-group{display:flex;flex-direction:column;gap:2px;}
  .ch-btn{width:clamp(28px,5vw,44px);height:clamp(16px,2.5vw,24px);background:linear-gradient(180deg,#444,#222);border:1px solid #555;border-radius:3px;color:#999;font-family:'VT323',monospace;font-size:clamp(0.55rem,1.3vw,0.8rem);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.1s;user-select:none;}
  .ch-btn:hover{background:linear-gradient(180deg,#555,#333);color:var(--crt-green);}
  .ch-btn:active{transform:scale(0.95);}

  /* ‚ïê‚ïê‚ïê TUNER RACK ‚ïê‚ïê‚ïê */
  .tuner-rack{width:min(95vw,900px);background:linear-gradient(180deg,#1a1510,#12100c);border:1px solid #2a2218;border-top:none;border-radius:0 0 16px 16px;padding:clamp(10px,2vw,20px) clamp(12px,2.5vw,24px);box-shadow:0 6px 30px rgba(0,0,0,0.5);margin-top:-2px;}
  .map-row{display:flex;gap:clamp(4px,1vw,8px);margin-bottom:clamp(8px,1.5vw,14px);}
  .map-btn{flex:1;padding:clamp(8px,1.5vw,14px) clamp(6px,1vw,10px);background:rgba(255,255,255,0.02);border:1px solid #222;border-radius:6px;cursor:pointer;transition:all 0.2s;text-align:center;}
  .map-btn:hover{background:rgba(255,255,255,0.04);border-color:#444;}
  .map-btn .map-btn-name{font-family:'Press Start 2P',monospace;font-size:clamp(0.3rem,0.9vw,0.5rem);letter-spacing:2px;transition:color 0.2s;}
  .map-btn .map-btn-desc{font-family:'VT323',monospace;font-size:clamp(0.6rem,1.3vw,0.85rem);color:#444;line-height:1.3;max-height:0;overflow:hidden;transition:max-height 0.3s,color 0.2s,margin 0.3s;margin-top:0;}
  .map-btn.active .map-btn-desc,.map-btn:hover .map-btn-desc{max-height:3em;margin-top:4px;}
  .map-btn.m-fresh .map-btn-name{color:#2a6618;}.map-btn.m-fresh:hover .map-btn-name,.map-btn.m-fresh.active .map-btn-name{color:var(--crt-green);}.map-btn.m-fresh.active{border-color:rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);box-shadow:0 0 12px rgba(57,255,20,0.1);}.map-btn.m-fresh:hover .map-btn-desc,.map-btn.m-fresh.active .map-btn-desc{color:rgba(57,255,20,0.5);}
  .map-btn.m-forgot .map-btn-name{color:#6b4800;}.map-btn.m-forgot:hover .map-btn-name,.map-btn.m-forgot.active .map-btn-name{color:var(--crt-amber);}.map-btn.m-forgot.active{border-color:rgba(255,176,0,0.3);background:rgba(255,176,0,0.05);box-shadow:0 0 12px rgba(255,176,0,0.1);}.map-btn.m-forgot:hover .map-btn-desc,.map-btn.m-forgot.active .map-btn-desc{color:rgba(255,176,0,0.5);}
  .map-btn.m-ancient .map-btn-name{color:#6b2020;}.map-btn.m-ancient:hover .map-btn-name,.map-btn.m-ancient.active .map-btn-name{color:var(--crt-red);}.map-btn.m-ancient.active{border-color:rgba(255,107,107,0.3);background:rgba(255,107,107,0.05);box-shadow:0 0 12px rgba(255,107,107,0.1);}.map-btn.m-ancient:hover .map-btn-desc,.map-btn.m-ancient.active .map-btn-desc{color:rgba(255,107,107,0.5);}

  .tuner-display{background:#080808;border:1px solid #1a1a1a;border-radius:6px;padding:clamp(8px,1.5vw,14px) clamp(10px,2vw,18px);display:flex;align-items:center;gap:clamp(6px,1.2vw,14px);flex-wrap:wrap;position:relative;}
  .lock-btn{width:clamp(20px,3vw,28px);height:clamp(20px,3vw,28px);background:none;border:1px solid #222;border-radius:4px;font-size:clamp(0.5rem,1vw,0.7rem);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;flex-shrink:0;padding:0;}
  .lock-btn.locked{border-color:var(--crt-amber);background:rgba(255,176,0,0.08);}
  .lock-btn:hover{border-color:#555;}
  .tuner-query{display:flex;align-items:center;gap:clamp(4px,0.8vw,8px);position:relative;}
  .tuner-query-name{
    font-family:'Share Tech Mono',monospace;font-size:clamp(0.6rem,1.4vw,0.85rem);
    letter-spacing:2px;padding:clamp(3px,0.5vw,5px) clamp(6px,1vw,10px);
    background:rgba(255,255,255,0.03);border:1px solid #1a1a1a;border-radius:3px;
    min-width:clamp(60px,12vw,120px);text-align:center;transition:color 0.3s,border-color 0.3s;
    white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:clamp(100px,20vw,200px);
    cursor:pointer;user-select:none;
  }
  .tuner-query-name:hover{background:rgba(255,255,255,0.06);border-color:#444;}

  /* Query picker dropdown */
  .query-picker{
    display:none;position:absolute;top:100%;left:0;z-index:100;
    margin-top:6px;min-width:220px;max-width:300px;max-height:320px;overflow-y:auto;
    background:#0c0c0c;border:1px solid #333;border-radius:6px;
    box-shadow:0 8px 30px rgba(0,0,0,0.8);
    scrollbar-width:thin;scrollbar-color:#333 transparent;
  }
  .query-picker::-webkit-scrollbar{width:4px;}
  .query-picker::-webkit-scrollbar-thumb{background:#333;border-radius:2px;}
  .query-picker.open{display:block;}
  .qp-item{
    padding:clamp(5px,0.8vw,8px) clamp(8px,1.5vw,14px);
    font-family:'Share Tech Mono',monospace;font-size:clamp(0.5rem,1.1vw,0.7rem);
    color:#777;letter-spacing:1px;cursor:pointer;
    transition:all 0.1s;border-bottom:1px solid #111;
    display:flex;align-items:center;gap:8px;
  }
  .qp-item:last-child{border-bottom:none;}
  .qp-item:hover{background:rgba(255,255,255,0.05);color:#ccc;}
  .qp-item.selected{color:var(--crt-green);background:rgba(57,255,20,0.05);}
  .qp-item .qp-dot{width:4px;height:4px;border-radius:50%;background:#333;flex-shrink:0;}
  .qp-item.selected .qp-dot{background:var(--crt-green);box-shadow:0 0 4px var(--crt-green);}
  .qp-item.has-fill::after{content:'####';font-size:0.5em;color:#333;margin-left:auto;}
  .qp-item.no-fill::after{content:'fixed';font-size:0.5em;color:#222;margin-left:auto;}

  .shuf-btn{width:clamp(22px,3.5vw,32px);height:clamp(22px,3.5vw,32px);background:rgba(255,255,255,0.03);border:1px solid #222;border-radius:4px;color:#555;font-size:clamp(0.6rem,1.2vw,0.8rem);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.15s;padding:0;flex-shrink:0;}
  .shuf-btn:hover{color:#aaa;border-color:#555;background:rgba(255,255,255,0.06);}
  .shuf-btn:active{transform:scale(0.9);}
  .shuf-btn.disabled{opacity:0.2;pointer-events:none;}
  .tuner-sep{width:1px;height:clamp(20px,4vw,34px);background:#1a1a1a;flex-shrink:0;}
  .tuner-fill{display:flex;align-items:center;gap:clamp(4px,0.8vw,8px);}
  .odo-wrap{display:flex;gap:1px;align-items:center;}
  .odo-digit{font-family:'Share Tech Mono',monospace;font-size:clamp(0.8rem,1.8vw,1.2rem);background:#0f0f0f;border:1px solid #1a1a1a;border-radius:2px;padding:clamp(2px,0.4vw,4px) clamp(3px,0.5vw,5px);color:var(--crt-green);text-shadow:0 0 6px rgba(57,255,20,0.3);min-width:clamp(14px,2.5vw,22px);text-align:center;transition:color 0.3s;letter-spacing:0;line-height:1;}
  .odo-empty{color:#222;text-shadow:none;}
  .warp-section{display:flex;align-items:center;margin-left:auto;}
  .warp-btn{padding:clamp(6px,1vw,10px) clamp(12px,2vw,20px);background:linear-gradient(180deg,#442200,#221100);border:1px solid #884400;border-radius:5px;color:var(--crt-amber);font-family:'Press Start 2P',monospace;font-size:clamp(0.3rem,0.8vw,0.45rem);cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all 0.15s;user-select:none;white-space:nowrap;}
  .warp-btn:hover{background:linear-gradient(180deg,#663300,#442200);color:#ffcc00;border-color:#ffaa00;box-shadow:0 0 16px rgba(255,170,0,0.3);}
  .warp-btn:active{transform:scale(0.95);}
  .tuner-readout{width:100%;margin-top:clamp(6px,1vw,10px);padding-top:clamp(6px,1vw,10px);border-top:1px solid #111;font-family:'Share Tech Mono',monospace;font-size:clamp(0.4rem,0.9vw,0.55rem);color:#333;letter-spacing:2px;display:flex;align-items:center;gap:8px;}
  .tuner-readout-q{color:#555;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
  .tuner-readout-map{font-size:clamp(0.35rem,0.7vw,0.45rem);letter-spacing:1px;}

  /* ‚ïê‚ïê‚ïê BOTTOM PANELS ‚ïê‚ïê‚ïê */
  .bottom-nav{display:flex;gap:0;width:min(95vw,900px);margin-top:clamp(8px,1.5vw,14px);z-index:1;}
  .bottom-nav-btn{flex:1;padding:clamp(5px,1vw,8px) 0;background:rgba(255,255,255,0.02);border:1px solid #1a1a1a;font-family:'Press Start 2P',monospace;font-size:clamp(0.22rem,0.65vw,0.35rem);color:#444;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:all 0.2s;text-align:center;}
  .bottom-nav-btn:first-child{border-radius:6px 0 0 6px;}
  .bottom-nav-btn:last-child{border-radius:0 6px 6px 0;}
  .bottom-nav-btn:hover{color:#777;background:rgba(255,255,255,0.04);border-color:#333;}
  .bottom-nav-btn.active{color:var(--crt-green);border-color:rgba(57,255,20,0.2);background:rgba(57,255,20,0.03);}
  .bottom-panel{display:none;width:min(95vw,900px);z-index:1;background:rgba(10,10,10,0.95);border:1px solid #1a1a1a;border-top:none;border-radius:0 0 8px 8px;padding:clamp(12px,3vw,28px);max-height:60vh;overflow-y:auto;scrollbar-width:thin;scrollbar-color:#333 transparent;}
  .bottom-panel::-webkit-scrollbar{width:4px;}
  .bottom-panel::-webkit-scrollbar-thumb{background:#333;border-radius:2px;}
  .bottom-panel.active{display:block;}
  .panel-h{font-family:'Press Start 2P',monospace;font-size:clamp(0.35rem,1vw,0.55rem);color:var(--crt-amber);letter-spacing:2px;margin:clamp(10px,2vw,18px) 0 clamp(6px,1vw,10px);text-shadow:0 0 8px rgba(255,176,0,0.2);}
  .panel-h:first-child{margin-top:0;}
  .panel-p{font-family:'VT323',monospace;font-size:clamp(0.85rem,2vw,1.15rem);color:#888;line-height:1.6;margin-bottom:0.6rem;}
  .panel-p a{color:var(--crt-blue);text-decoration:none;}.panel-p a:hover{text-decoration:underline;}
  .panel-p strong{color:#bbb;}
  .panel-controls-grid{display:grid;grid-template-columns:auto 1fr;gap:4px clamp(8px,2vw,16px);align-items:baseline;margin:0.5rem 0;}
  .panel-key{font-family:'Share Tech Mono',monospace;font-size:clamp(0.5rem,1.2vw,0.7rem);color:var(--crt-green);text-shadow:0 0 4px rgba(57,255,20,0.2);white-space:nowrap;}
  .panel-desc{font-family:'VT323',monospace;font-size:clamp(0.8rem,1.8vw,1.05rem);color:#777;line-height:1.4;}
  .map-card{background:rgba(255,255,255,0.02);border:1px solid #1a1a1a;border-radius:4px;padding:clamp(8px,1.5vw,14px);margin-bottom:clamp(6px,1vw,10px);}
  .map-card-title{font-family:'Press Start 2P',monospace;font-size:clamp(0.22rem,0.6vw,0.35rem);letter-spacing:2px;margin-bottom:4px;}
  .map-card-title.mc-fresh{color:var(--crt-green);}.map-card-title.mc-forgot{color:var(--crt-amber);}.map-card-title.mc-ancient{color:var(--crt-red);}
  .map-card p{font-family:'VT323',monospace;font-size:clamp(0.8rem,1.8vw,1.05rem);color:#777;line-height:1.5;}
  .map-card .map-examples{font-family:'Share Tech Mono',monospace;font-size:clamp(0.45rem,1vw,0.6rem);color:#444;margin-top:4px;letter-spacing:1px;line-height:1.6;}
  .credit-block{display:flex;gap:clamp(8px,2vw,16px);align-items:flex-start;margin-bottom:clamp(8px,1.5vw,14px);}
  .credit-icon{font-size:clamp(1rem,2.5vw,1.5rem);flex-shrink:0;line-height:1;}
  .credit-text{flex:1;}
  .credit-text .credit-name{font-family:'Press Start 2P',monospace;font-size:clamp(0.25rem,0.7vw,0.38rem);color:var(--crt-green);letter-spacing:1px;margin-bottom:2px;}
  .credit-text .credit-role{font-family:'VT323',monospace;font-size:clamp(0.8rem,1.8vw,1.05rem);color:#777;line-height:1.4;}
  .credit-text a{color:var(--crt-blue);text-decoration:none;font-family:'Share Tech Mono',monospace;font-size:clamp(0.45rem,1vw,0.6rem);}.credit-text a:hover{text-decoration:underline;}
  .panel-divider{border:none;border-top:1px solid #1a1a1a;margin:clamp(8px,2vw,16px) 0;}
  #error-toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(100px);background:rgba(255,0,0,0.15);border:1px solid rgba(255,0,0,0.3);padding:0.6rem 1.5rem;font-family:'Share Tech Mono',monospace;font-size:0.8rem;color:#ff4444;border-radius:4px;z-index:9999;transition:transform 0.3s ease;pointer-events:none;max-width:90vw;text-align:center;}
  #error-toast.visible{transform:translateX(-50%) translateY(0);}
  @keyframes flicker{0%,100%{opacity:1;}92%{opacity:1;}93%{opacity:0.85;}94%{opacity:1;}}
  .screen-container.flicker{animation:flicker 4s infinite;}
  @keyframes warp-flash{0%{box-shadow:inset 0 0 0 rgba(255,170,0,0);}20%{box-shadow:inset 0 0 60px rgba(255,170,0,0.3);}100%{box-shadow:inset 0 0 0 rgba(255,170,0,0);}}
  .screen-container.warping{animation:warp-flash 0.6s ease !important;}
  @keyframes odo-tick{0%{transform:translateY(-30%);opacity:0;}100%{transform:translateY(0);opacity:1;}}
  .odo-tick{animation:odo-tick 0.15s ease-out;}
</style>
</head>
<body>
<div class="page-vignette"></div>
<div id="file-warning"><h1>‚ö† YOUTUBE BLOCKS EMBEDS FROM file://</h1><p>Put both files in a folder, open a terminal there, and run:</p><code>python serve.py</code><p>Then go to <strong style="color:var(--crt-green)">http://localhost:8666/yrb-surfer.html</strong></p><div class="small">On Windows use <strong>python</strong>, on Mac/Linux use <strong>python3</strong>.<br>Need Python? <a href="https://python.org" target="_blank">python.org</a></div></div>

<!-- SETUP -->
<div id="setup-screen">
  <h1>THE GRAVEYARD</h1>
  <div class="setup-subtitle">YouTube's Recycle Bin Surfer</div>
  <div class="setup-box">
    <input type="text" id="worker-url-input" placeholder="PASTE YOUR CLOUDFLARE WORKER URL" spellcheck="false" autocomplete="off">
    <button class="setup-free-btn" id="worker-btn">‚åÅ CONNECT</button>
    <div class="setup-error" id="setup-error"></div>
    <div class="setup-divider"><span>or</span></div>
    <input type="text" id="api-key-input" placeholder="YOUTUBE API KEY (OPTIONAL ‚Äî ~100 WARPS/DAY)" spellcheck="false" autocomplete="off">
    <button class="setup-btn" id="go-btn">USE API KEY</button>
  </div>
  <div class="setup-steps">
    <p><strong style="color:var(--crt-amber);">Recommended:</strong> Deploy the free <a href="https://github.com" target="_blank">Cloudflare Worker</a> (5 min, see setup guide) for <strong style="color:var(--crt-green);">unlimited warps</strong>.</p>
    <p><strong style="color:#666;">Alternatively:</strong> Use a <a href="https://console.cloud.google.com/apis/credentials" target="_blank">YouTube API key</a>, but it's limited to ~100 warps/day.</p>
  </div>
</div>

<div id="main-container">
  <div class="mode-badge" id="mode-badge" title="Click to switch mode">FREE</div>
  <div class="tv-housing"><div class="tv-outer"><div class="tv-bezel">
    <div class="screen-container flicker" id="screen">
      <div class="screen-glare"></div>
      <div id="yt-player-wrap"><div id="yt-player"></div></div>
      <div id="static-overlay"><canvas id="static-canvas"></canvas></div>
      <div id="channel-osd">CH <span id="ch-num">01</span></div>
      <div id="playlist-counter"></div>
      <div id="vol-osd"></div>
      <div id="status-msg"></div>
      <div id="power-off-screen"><div class="dot"></div></div>
    </div>
    <div class="info-strip">
      <div class="info-text"><div class="info-title" id="info-title">‚Äî</div><div class="info-meta" id="info-meta">‚Äî</div></div>
      <a class="info-yt-link" id="info-yt-link" href="#" target="_blank" title="Open on YouTube" style="visibility:hidden;"><svg viewBox="0 0 24 24" fill="none"><path d="M23 12s-3.2-7-11-7S1 12 1 12s3.2 7 11 7 11-7 11-7z" stroke="#c00" stroke-width="1.5"/><polygon points="10,8 16,12 10,16" fill="#c00"/></svg></a>
    </div>
  </div>
  <div class="tv-controls">
    <div class="tv-brand">GRAVEYARD ‚Ñ¢</div>
    <div class="controls-right">
      <div class="power-led on" id="power-led"></div>
      <button class="pwr-btn" id="pwr-btn" title="Power (P)">‚èª</button>
      <div class="ctrl-divider"></div>
      <div class="vol-wrap"><div class="vol-label">VOL</div><div class="knob" id="knob-vol" title="Drag up/down or scroll"></div><div class="vol-num" id="vol-num">100</div></div>
      <div class="ctrl-divider"></div>
      <div class="ch-btn-group"><button class="ch-btn" id="ch-up" title="Channel up (‚Üë)">‚ñ≤</button><button class="ch-btn" id="ch-down" title="Channel down (‚Üì)">‚ñº</button></div>
    </div>
  </div></div></div>

  <!-- TUNER RACK -->
  <div class="tuner-rack">
    <div class="map-row">
      <div class="map-btn m-fresh" id="map-btn-fresh"><div class="map-btn-name">FRESH</div><div class="map-btn-desc">Recent smartphone & app uploads, sorted by date</div></div>
      <div class="map-btn m-forgot" id="map-btn-forgotten"><div class="map-btn-name">FORGOTTEN</div><div class="map-btn-desc">Camera dumps & device footage ‚Äî the 0-view graveyard</div></div>
      <div class="map-btn m-ancient" id="map-btn-ancient"><div class="map-btn-name">ANCIENT</div><div class="map-btn-desc">Early YouTube relics ‚Äî flip phones & picture mail</div></div>
    </div>
    <div class="tuner-display">
      <div class="tuner-query">
        <button class="lock-btn" id="lock-query" title="Lock query pattern">üîì</button>
        <div class="tuner-query-name" id="tuner-query-name" title="Click to browse queries">‚Äî</div>
        <button class="shuf-btn" id="shuf-query" title="Shuffle query (Q)">‚Üª</button>
        <div class="query-picker" id="query-picker"></div>
      </div>
      <div class="tuner-sep"></div>
      <div class="tuner-fill">
        <button class="lock-btn" id="lock-fill" title="Lock fill value">üîì</button>
        <div class="odo-wrap" id="odo-wrap"><div class="odo-digit odo-empty">‚Äî</div></div>
        <button class="shuf-btn" id="shuf-fill" title="Shuffle fill (R)">‚Üª</button>
      </div>
      <div class="tuner-sep"></div>
      <div class="warp-section"><button class="warp-btn" id="warp-btn" title="Randomize unlocked + search (D)">‚åÅ WARP</button></div>
      <div class="tuner-readout"><span class="tuner-readout-map" id="readout-map">‚Äî</span><span class="tuner-readout-q" id="readout-q">WAITING FOR SIGNAL...</span></div>
    </div>
  </div>

  <div class="bottom-nav">
    <button class="bottom-nav-btn" data-panel="panel-about">ABOUT</button>
    <button class="bottom-nav-btn" data-panel="panel-howto">HOW TO</button>
    <button class="bottom-nav-btn" data-panel="panel-credits">CREDITS</button>
  </div>
  <div class="bottom-panel" id="panel-about"><div class="panel-h">WHAT IS THIS?</div><div class="panel-p">THE GRAVEYARD is a tool for surfing YouTube's hidden underbelly ‚Äî the millions of videos uploaded with default filenames, zero views, and no intention of ever being found. Think of it as channel surfing through the internet's junk drawer.</div><div class="panel-p">Every day, people accidentally upload videos straight from their cameras and phones with names like <strong>IMG_4293.MOV</strong> or <strong>GOPR0847</strong>. These videos don't get titles, descriptions, or tags. They sit in YouTube's database forever, unseen ‚Äî until now.</div><div class="panel-h">WHY DOES IT EXIST?</div><div class="panel-p">There's something fascinating about unfiltered, unedited glimpses into other people's lives. A dashcam in rural Russia. A kid's first Minecraft recording. A family barbecue from 2009 shot on a Flip camcorder. Someone's cat, uploaded from a flip phone via picture mail in 2007.</div><div class="panel-p">These aren't content ‚Äî they're artifacts. THE GRAVEYARD lets you discover them the way you'd discover something flipping through channels at 2 AM. No algorithm. No recommendations. Just raw, accidental humanity.</div><div class="panel-h">HOW DOES IT WORK?</div><div class="panel-p">The surfer uses the <strong>YouTube Recycle Bin</strong> methodology ‚Äî searching for default camera filenames, auto-generated titles, and forgotten upload patterns. Each search generates random parameters (like <strong>DSCF</strong> + a random 4-digit number). Results are verified for embedding, shuffled, and served through a retro CRT TV interface.</div></div>
  <div class="bottom-panel" id="panel-howto"><div class="panel-h">THE TUNER</div><div class="panel-p">The tuner rack below the TV has three layers that build your search query. Each can be <strong>locked</strong> independently so WARP won't change it.</div><div class="panel-controls-grid"><div class="panel-key">MAP (1 2 3)</div><div class="panel-desc">The era/category ‚Äî Fresh, Forgotten, or Ancient. Click to switch and immediately search.</div><div class="panel-key">QUERY ‚Üª (Q)</div><div class="panel-desc">The keyphrase pattern. Click the name to browse all queries in the current map, or ‚Üª to shuffle randomly.</div><div class="panel-key">FILL ‚Üª (R)</div><div class="panel-desc">The random numbers or date shown as an odometer. Shuffle to re-roll. Some queries have no fill.</div><div class="panel-key">üîí LOCKS</div><div class="panel-desc">Click the lock icons to freeze a layer. Locked layers survive WARPs.</div><div class="panel-key">‚åÅ WARP (D)</div><div class="panel-desc">Randomizes all unlocked layers and searches. Your main discovery tool.</div></div><div class="panel-h">TV CONTROLS</div><div class="panel-controls-grid"><div class="panel-key">CH ‚ñ≤/‚ñº (‚Üë‚Üì)</div><div class="panel-desc">Surf through videos in the current playlist. Auto-warps at the end.</div><div class="panel-key">VOL</div><div class="panel-desc">Drag the knob up/down or scroll to adjust 0‚Äì100. M to mute.</div><div class="panel-key">POWER (P)</div><div class="panel-desc">Turn the TV on or off.</div></div><hr class="panel-divider"><div class="panel-h">THE THREE MAPS</div><div class="map-card"><div class="map-card-title mc-fresh">FRESH</div><p>Recent uploads sorted by <strong>date</strong>. Smartphones, apps, screen recorders.</p><div class="map-examples">IMG ¬∑ MVI ¬∑ PXL ¬∑ VID ¬∑ WIN ¬∑ InShot ¬∑ WhatsApp Video ¬∑ FullSizeRender ¬∑ RPReplay ¬∑ My Movie ¬∑ Bandicam ¬∑ Javaw ¬∑ Robloxapp ¬∑ VLC Record ¬∑ .MP4 ¬∑ .MOV ¬∑ .AVI ¬∑ .3gp</div></div><div class="map-card"><div class="map-card-title mc-forgot">FORGOTTEN</div><p>Camera dumps 2008‚Äì2023 sorted by <strong>view count</strong>. Dashcams, bodycams, decade-old camera tests.</p><div class="map-examples">DSC ¬∑ DSCF ¬∑ DSCN ¬∑ GOPR ¬∑ GH01 ¬∑ DJI ¬∑ SAM ¬∑ FILE ¬∑ MAH0 ¬∑ MOV0 ¬∑ M2U0 ¬∑ SANY ¬∑ HPIM ¬∑ SDC1 ¬∑ GEDC ¬∑ AMBA ¬∑ Axon Body ¬∑ AVSEQ ¬∑ Flipagram</div></div><div class="map-card"><div class="map-card-title mc-ancient">ANCIENT</div><p>YouTube relics 2006‚Äì2010 sorted by <strong>view count</strong>. Flip phones, picture mail, MMS.</p><div class="map-examples">Picture Mail ¬∑ Media1.3gp ¬∑ Video.3g2 ¬∑ Multimedia Message ¬∑ Video from my phone ¬∑ My Great Movie ¬∑ Flip Video Camcorder ¬∑ muuvee</div></div><hr class="panel-divider"><div class="panel-h">MODES</div><div class="panel-p"><strong style="color:var(--crt-amber);">Worker mode</strong> ‚Äî uses your Cloudflare Worker proxy. Unlimited warps, free, fast & reliable.</div><div class="panel-p"><strong style="color:var(--crt-green);">API mode</strong> ‚Äî uses YouTube Data API v3 directly. Faster, but ~100 warps/day on free tier.</div></div>
  <div class="bottom-panel" id="panel-credits"><div class="panel-h">CREDITS & THANKS</div><div class="credit-block"><div class="credit-icon">üìº</div><div class="credit-text"><div class="credit-name">KVN AUST</div><div class="credit-role">Creator of the <strong>YouTube Recycle Bin</strong> methodology ‚Äî the keyphrase maps, search patterns, and discovery techniques that make this tool possible.</div><a href="https://www.youtube.com/@KVNAUST" target="_blank">youtube.com/@KVNAUST</a></div></div><div class="credit-block"><div class="credit-icon">üìÑ</div><div class="credit-text"><div class="credit-name">THE ORIGINAL DOCUMENT</div><div class="credit-role">The comprehensive guide to the YouTube Recycle Bin ‚Äî source material for all three keyphrase maps.</div><a href="https://docs.google.com/document/d/19cPH_LDXj6jjLUPPKn1OITJ0jJx3MrJIm9B7fUqaJD8/" target="_blank">YouTube Recycle Bin ‚Äî Google Doc</a></div></div><hr class="panel-divider"><div class="panel-p" style="color:#444;font-size:clamp(0.7rem,1.5vw,0.9rem);">THE GRAVEYARD is free and open-source. No data collected. No tracking. Your API key never leaves your browser.</div></div>
</div>

<div id="error-toast"></div>
<script src="https://www.youtube.com/iframe_api"></script>
<script>
if(location.protocol==='file:'){document.getElementById('file-warning').classList.add('active');document.getElementById('setup-screen').style.display='none';}

function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function pad(n,l){return n.toString().padStart(l,'0');}
function pick(a){return a[Math.floor(Math.random()*a.length)];}
function shuffleArr(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
const MO=['January','February','March','April','May','June','July','August','September','October','November','December'];
function dateFmt(){const now=new Date();const d=new Date(now);d.setDate(d.getDate()-rand(1,730));return`${d.getFullYear()}${pad(d.getMonth()+1,2)}${pad(d.getDate(),2)}`;}

const MAPS={
  fresh:{name:'FRESH',order:'date',desc:'Recent smartphone & app uploads',keys:[
    {l:'IMG',fill:()=>rand(1000,9999).toString(),q:f=>`IMG ${f}`},
    {l:'MVI',fill:()=>rand(1000,9999).toString(),q:f=>`MVI ${f}`},
    {l:'YYYYMMDD',fill:()=>dateFmt(),q:f=>f},
    {l:'WIN',fill:()=>dateFmt(),q:f=>`WIN ${f}`},
    {l:'VID',fill:()=>dateFmt(),q:f=>`VID ${f}`},
    {l:'PXL',fill:()=>dateFmt(),q:f=>`PXL ${f}`},
    {l:'InShot',fill:()=>dateFmt(),q:f=>`InShot ${f}`},
    {l:'My Movie',fill:()=>rand(1,15).toString(),q:f=>`"My Movie ${f}"`},
    {l:'FullSizeRender',fill:null,q:()=>'FullSizeRender'},
    {l:'RPReplay',fill:null,q:()=>'RPReplay'},
    {l:'.MP4',fill:null,q:()=>'".MP4"'},
    {l:'.MOV',fill:null,q:()=>'".MOV"'},
    {l:'.AVI',fill:null,q:()=>'".AVI"'},
    {l:'.3gp',fill:null,q:()=>'".3gp"'},
    {l:'Untitled video',fill:null,q:()=>'"Untitled video"'},
    {l:'Copy of Copy of',fill:null,q:()=>'"Copy of Copy of"'},
    {l:'Videoplayback',fill:null,q:()=>'Videoplayback'},
    {l:'Bandicam',fill:null,q:()=>'"Bandicam"'},
    {l:'Javaw',fill:null,q:()=>'"Javaw"'},
    {l:'Robloxapp',fill:null,q:()=>'Robloxapp'},
    {l:'VLC Record',fill:null,q:()=>'VLC Record'},
    {l:'WhatsApp Video',fill:()=>new Date().getFullYear().toString(),q:f=>`WhatsApp Video ${f}`},
    {l:'Capture',fill:()=>dateFmt(),q:f=>`Capture ${f}`},
    {l:'VTS 01',fill:null,q:()=>'VTS 01'},
    {l:'YouCut',fill:()=>dateFmt(),q:f=>`YouCut ${f}`},
  ]},
  forgotten:{name:'FORGOTTEN',order:'viewCount',desc:'Camera dumps ‚Äî the 0-view graveyard',keys:[
    {l:'DSC',fill:()=>rand(1000,9999).toString(),q:f=>`DSC ${f}`},
    {l:'DSCF',fill:()=>rand(1000,9999).toString(),q:f=>`DSCF${f}`},
    {l:'DSCN',fill:()=>rand(1000,9999).toString(),q:f=>`DSCN${f}`},
    {l:'GOPR',fill:()=>rand(1000,9999).toString(),q:f=>`GOPR${f}`},
    {l:'GH01',fill:()=>rand(1000,9999).toString(),q:f=>`GH01${f}`},
    {l:'DJI',fill:()=>rand(1,2000).toString(),q:f=>`DJI ${f}`},
    {l:'SAM',fill:()=>rand(1000,9999).toString(),q:f=>`SAM ${f}`},
    {l:'FILE',fill:()=>rand(1000,9999).toString(),q:f=>`FILE${f}`},
    {l:'MAH0',fill:()=>rand(1000,9999).toString(),q:f=>`MAH0${f}`},
    {l:'MOV0',fill:()=>rand(1000,9999).toString(),q:f=>`MOV0${f}`},
    {l:'M2U0',fill:()=>rand(1000,9999).toString(),q:f=>`M2U0${f}`},
    {l:'SANY',fill:()=>rand(1000,9999).toString(),q:f=>`SANY${f}`},
    {l:'HPIM',fill:()=>rand(1000,9999).toString(),q:f=>`HPIM${f}`},
    {l:'SDC1',fill:()=>rand(1000,9999).toString(),q:f=>`SDC1${f}`},
    {l:'GEDC',fill:()=>rand(1000,9999).toString(),q:f=>`GEDC${f}`},
    {l:'Video####',fill:()=>rand(1000,9999).toString(),q:f=>`Video${f}`},
    {l:'AMBA',fill:()=>rand(1,5000).toString(),q:f=>`AMBA${f}`},
    {l:'SUNP',fill:()=>rand(1000,1500).toString(),q:f=>`SUNP${f}`},
    {l:'REC',fill:()=>pad(rand(1,1000),4),q:f=>`REC ${f}`},
    {l:'DSCI',fill:()=>rand(1,4000).toString(),q:f=>`DSCI${f}`},
    {l:'Test Upload',fill:null,q:()=>'"Test upload"'},
    {l:'Axon Body 2',fill:null,q:()=>'"Axon Body 2 Video"'},
    {l:'Bandicam (Old)',fill:()=>`${rand(2012,2023)} ${pad(rand(1,12),2)}`,q:f=>`Bandicam ${f}`},
    {l:'Android Upload',fill:null,q:()=>'"This video was uploaded from an Android phone"'},
    {l:'Sprint PictureMail',fill:null,q:()=>'"Sprint PictureMail"'},
    {l:'AVSEQ',fill:()=>pad(rand(1,99),2),q:f=>`AVSEQ${f}`},
    {l:'–∫–æ–ø–∏—è –≤–∏–¥–µ–æ',fill:null,q:()=>'"–∫–æ–ø–∏—è –≤–∏–¥–µ–æ"'},
    {l:'Flipagram',fill:()=>`${pick(MO)} ${rand(2013,2019)}`,q:f=>`Flipagram ${f}`},
  ]},
  ancient:{name:'ANCIENT',order:'viewCount',desc:'Early YouTube relics ‚Äî flip phones & picture mail',keys:[
    {l:'Picture Mail!',fill:null,q:()=>'"You have new picture mail! (video)"'},
    {l:'Media1.3gp',fill:null,q:()=>'"Media1.3gp"'},
    {l:'Media1.3g2',fill:null,q:()=>'"Media1.3g2"'},
    {l:'Video.3g2',fill:null,q:()=>'"Video.3g2"'},
    {l:'Multimedia Msg',fill:null,q:()=>'"New Multimedia Message"'},
    {l:'Video from phone',fill:null,q:()=>'"Video from my phone"'},
    {l:'Mobile Upload',fill:null,q:()=>'"Video uploaded from my mobile phone"'},
    {l:'Video0XX',fill:()=>`0${rand(1,9)}`,q:f=>`Video0${f}`},
    {l:'My Great Movie',fill:null,q:()=>'"My Great Movie"'},
    {l:'My First Project',fill:null,q:()=>'"My First Project"'},
    {l:'V√≠deo (ES)',fill:null,q:()=>'"V√≠deo desde mi tel√©fono"'},
    {l:'muuvee',fill:()=>pad(rand(1,40),4),q:f=>`muuvee${f}`},
    {l:'0_VIDEO',fill:()=>pad(rand(1,54),3),q:f=>`0_VIDEO_0${f}`},
    {l:'New Message',fill:null,q:()=>'"You have received a new message"'},
    {l:'Flip Camcorder',fill:()=>{const m=pick(MO);const d=rand(1,28);const y=rand(2007,2010);return`${m} ${d}, ${y}`;},q:f=>`"Recorded on ${f} using a Flip Video Camcorder"`},
  ]}
};
const MAP_KEYS=['fresh','forgotten','ancient'];
const MAP_COLORS={fresh:'#39ff14',forgotten:'#ffb000',ancient:'#ff6b6b'};

// ‚ïê‚ïê‚ïê STATE ‚ïê‚ïê‚ïê
let API_KEY='',WORKER_URL='',searchMode='worker'; // 'worker' or 'api'
let isPoweredOn=true,isLoading=false,currentVideoId=null;
let osdTimeout,counterTimeout,volOsdTimeout;
let playlist=[],playlistIdx=-1;
let curMap='fresh',curQueryIdx=0,curFill='';
let mapLocked=false,queryLocked=false,fillLocked=false;
let volume=100;
let ytPlayer=null,ytReady=false,skipTimer=null;
let pickerOpen=false;

// ‚ïê‚ïê‚ïê STATIC ‚ïê‚ïê‚ïê
const sCvs=document.getElementById('static-canvas'),sCtx=sCvs.getContext('2d');
let sAnim=null;
function resizeStatic(){const r=document.getElementById('screen').getBoundingClientRect();sCvs.width=Math.min(r.width,480);sCvs.height=Math.min(r.height,270);}
function drawStatic(){const w=sCvs.width,h=sCvs.height,img=sCtx.createImageData(w,h),d=img.data;for(let i=0;i<d.length;i+=4){const v=Math.random()*255;d[i]=v;d[i+1]=v;d[i+2]=v;d[i+3]=255;}sCtx.putImageData(img,0,0);sAnim=requestAnimationFrame(drawStatic);}
function showStatic(){resizeStatic();document.getElementById('static-overlay').classList.add('active');if(!sAnim)drawStatic();}
function hideStatic(){document.getElementById('static-overlay').classList.remove('active');if(sAnim){cancelAnimationFrame(sAnim);sAnim=null;}}

// ‚ïê‚ïê‚ïê UI HELPERS ‚ïê‚ïê‚ïê
function flashOSD(n){const o=document.getElementById('channel-osd');document.getElementById('ch-num').textContent=(n||1).toString().padStart(2,'0');o.classList.add('visible');clearTimeout(osdTimeout);osdTimeout=setTimeout(()=>o.classList.remove('visible'),3000);}
function showPlaylistCounter(){const c=document.getElementById('playlist-counter');c.textContent=`${playlistIdx+1} / ${playlist.length}`;c.classList.add('visible');clearTimeout(counterTimeout);counterTimeout=setTimeout(()=>c.classList.remove('visible'),3000);}
function flashVolOSD(){const o=document.getElementById('vol-osd');const bars=Math.round(volume/10);o.innerHTML=`VOL ${'‚ñà'.repeat(bars)}<span style="color:#222">${'‚ñà'.repeat(10-bars)}</span> ${volume}`;o.classList.add('visible');clearTimeout(volOsdTimeout);volOsdTimeout=setTimeout(()=>o.classList.remove('visible'),2000);}
function showStatus(m){const e=document.getElementById('status-msg');e.textContent=m;e.classList.add('visible');}
function hideStatus(){document.getElementById('status-msg').classList.remove('visible');}
function showError(m){const t=document.getElementById('error-toast');t.textContent=m;t.classList.add('visible');setTimeout(()=>t.classList.remove('visible'),4000);}

function getCurEntry(){return MAPS[curMap].keys[curQueryIdx];}
function buildFullQuery(){const e=getCurEntry();return e.fill?e.q(curFill):e.q();}
function genFill(){const e=getCurEntry();return e.fill?e.fill():'';}

function updateModeBadge(){const b=document.getElementById('mode-badge');b.textContent=searchMode==='api'?'API':'WORKER';b.className='mode-badge '+(searchMode==='api'?'api':'free');}

function updateTunerUI(){
  const map=MAPS[curMap];const e=getCurEntry();const color=MAP_COLORS[curMap];
  MAP_KEYS.forEach(mk=>{const btn=document.getElementById('map-btn-'+mk);if(mk===curMap)btn.classList.add('active');else btn.classList.remove('active');});
  const qn=document.getElementById('tuner-query-name');qn.textContent=e.l;qn.style.color=color;qn.style.borderColor=color+'4d';
  const ow=document.getElementById('odo-wrap');ow.innerHTML='';
  if(e.fill&&curFill){
    curFill.split('').forEach((ch,i)=>{const d=document.createElement('div');d.className='odo-digit odo-tick';d.style.animationDelay=i*30+'ms';d.textContent=ch;d.style.color=color;d.style.textShadow=`0 0 6px ${color}4d`;ow.appendChild(d);});
    document.getElementById('shuf-fill').classList.remove('disabled');
  }else{const d=document.createElement('div');d.className='odo-digit odo-empty';d.textContent='‚Äî';ow.appendChild(d);document.getElementById('shuf-fill').classList.add('disabled');}
  document.getElementById('lock-query').textContent=queryLocked?'üîí':'üîì';document.getElementById('lock-query').classList.toggle('locked',queryLocked);
  document.getElementById('lock-fill').textContent=fillLocked?'üîí':'üîì';document.getElementById('lock-fill').classList.toggle('locked',fillLocked);
  const fullQ=buildFullQuery();document.getElementById('readout-map').textContent=map.name;document.getElementById('readout-map').style.color=color;document.getElementById('readout-q').textContent=`SEARCH: ${fullQ.replace(/"/g,'')}`;
}

// ‚ïê‚ïê‚ïê QUERY PICKER ‚ïê‚ïê‚ïê
function buildQueryPicker(){
  const picker=document.getElementById('query-picker');picker.innerHTML='';
  const map=MAPS[curMap];const color=MAP_COLORS[curMap];
  map.keys.forEach((entry,idx)=>{
    const item=document.createElement('div');
    item.className='qp-item'+(idx===curQueryIdx?' selected':'')+(entry.fill?' has-fill':' no-fill');
    item.innerHTML=`<div class="qp-dot"></div><span>${entry.l}</span>`;
    if(idx===curQueryIdx){item.querySelector('.qp-dot').style.background=color;item.querySelector('.qp-dot').style.boxShadow=`0 0 4px ${color}`;item.style.color=color;}
    item.addEventListener('click',()=>{
      curQueryIdx=idx;if(!fillLocked)curFill=genFill();
      closePicker();updateTunerUI();doSearch();
    });
    picker.appendChild(item);
  });
}
function togglePicker(){if(pickerOpen)closePicker();else openPicker();}
function openPicker(){buildQueryPicker();document.getElementById('query-picker').classList.add('open');pickerOpen=true;}
function closePicker(){document.getElementById('query-picker').classList.remove('open');pickerOpen=false;}

function updateInfoStrip(title,channel,date){document.getElementById('info-title').textContent=title||'‚Äî';document.getElementById('info-meta').textContent=(channel||'')+(date?' ¬∑ '+new Date(date).toLocaleDateString():'');const link=document.getElementById('info-yt-link');if(currentVideoId){link.href=`https://www.youtube.com/watch?v=${currentVideoId}`;link.style.visibility='visible';}}
function clearInfoStrip(){document.getElementById('info-title').textContent='‚Äî';document.getElementById('info-meta').textContent='‚Äî';document.getElementById('info-yt-link').style.visibility='hidden';}

// ‚ïê‚ïê‚ïê YOUTUBE PLAYER ‚ïê‚ïê‚ïê
function onYouTubeIframeAPIReady(){ytPlayer=new YT.Player('yt-player',{width:'100%',height:'100%',playerVars:{autoplay:1,controls:0,rel:0,modestbranding:1,iv_load_policy:3,playsinline:1,fs:0},events:{onReady:function(){ytReady=true;ytPlayer.setVolume(volume);},onStateChange:onPlayerStateChange,onError:onPlayerError}});}
function onPlayerStateChange(e){if(e.data===YT.PlayerState.PLAYING){clearTimeout(skipTimer);hideStatic();hideStatus();document.getElementById('yt-player-wrap').style.opacity='1';}if(e.data===YT.PlayerState.ENDED)chUp();}
function onPlayerError(e){clearTimeout(skipTimer);if(playlist.length>1){playlist.splice(playlistIdx,1);if(playlistIdx>=playlist.length)playlistIdx=0;setTimeout(()=>playCurrent(),300);}else setTimeout(()=>doWarp(),500);}
function loadVideoInPlayer(vidId){currentVideoId=vidId;if(ytReady&&ytPlayer&&ytPlayer.loadVideoById){ytPlayer.loadVideoById({videoId:vidId});ytPlayer.setVolume(volume);}clearTimeout(skipTimer);skipTimer=setTimeout(()=>{if(playlist.length>1){playlist.splice(playlistIdx,1);if(playlistIdx>=playlist.length)playlistIdx=0;playCurrent();}else doWarp();},8000);}

// ‚ïê‚ïê‚ïê SEARCH ‚Äî YouTube API ‚ïê‚ïê‚ïê
async function ytSearchAPI(query,order){
  const url=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=20&q=${encodeURIComponent(query)}&order=${order}&videoEmbeddable=true&key=${API_KEY}`;
  const r=await fetch(url);if(!r.ok){if(r.status===403)showError('API quota exceeded ‚Äî switch to Free mode!');else showError(`API error: ${r.status}`);throw new Error(`${r.status}`);}
  const d=await r.json();const items=(d.items||[]).map(i=>({id:i.id.videoId,title:i.snippet.title,channel:i.snippet.channelTitle,date:i.snippet.publishedAt}));
  if(!items.length)return[];
  // Embeddability check
  const ids=items.map(v=>v.id).join(',');
  try{const vr=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=status&id=${ids}&key=${API_KEY}`);if(vr.ok){const vd=await vr.json();const ok=new Set((vd.items||[]).filter(v=>v.status&&v.status.embeddable).map(v=>v.id));return items.filter(v=>ok.has(v.id));}}catch(e){}
  return items;
}

// ‚ïê‚ïê‚ïê SEARCH ‚Äî Cloudflare Worker (free, unlimited) ‚ïê‚ïê‚ïê
async function ytSearchWorker(query){
  const url=`${WORKER_URL}?q=${encodeURIComponent(query)}`;
  const ctrl=new AbortController();const timer=setTimeout(()=>ctrl.abort(),12000);
  try{
    const r=await fetch(url,{signal:ctrl.signal});clearTimeout(timer);
    if(!r.ok)throw new Error(`Worker returned ${r.status}`);
    const data=await r.json();
    if(data.error)throw new Error(data.error);
    return(data.items||[]).filter(v=>v.id).slice(0,20);
  }catch(e){clearTimeout(timer);throw e;}
}

// Unified search
async function doYTSearch(query){
  if(searchMode==='api')return ytSearchAPI(query,MAPS[curMap].order);
  return ytSearchWorker(query);
}

// ‚ïê‚ïê‚ïê PLAY ‚ïê‚ïê‚ïê
function playCurrent(){if(!playlist.length)return;playlistIdx=((playlistIdx%playlist.length)+playlist.length)%playlist.length;const v=playlist[playlistIdx];showStatic();showStatus('TUNING...');document.getElementById('yt-player-wrap').style.opacity='0';loadVideoInPlayer(v.id);updateInfoStrip(v.title,v.channel,v.date);setTimeout(()=>{flashOSD(playlistIdx+1);showPlaylistCounter();},400);}

// ‚ïê‚ïê‚ïê TUNER ACTIONS ‚ïê‚ïê‚ïê
function shuffleQuery(){if(queryLocked)return;curQueryIdx=rand(0,MAPS[curMap].keys.length-1);if(!fillLocked)curFill=genFill();updateTunerUI();}
function shuffleFill(){if(fillLocked)return;if(!getCurEntry().fill)return;curFill=genFill();updateTunerUI();}

function setMap(mk){
  if(!isPoweredOn||isLoading)return;
  curMap=mk;
  if(!queryLocked)curQueryIdx=rand(0,MAPS[mk].keys.length-1);
  else if(curQueryIdx>=MAPS[mk].keys.length)curQueryIdx=rand(0,MAPS[mk].keys.length-1);
  if(!fillLocked)curFill=genFill();
  updateTunerUI();doSearch();
}

async function doWarp(){
  if(isLoading||!isPoweredOn)return;
  if(!mapLocked)curMap=pick(MAP_KEYS);
  if(!queryLocked)curQueryIdx=rand(0,MAPS[curMap].keys.length-1);
  if(!fillLocked)curFill=genFill();
  updateTunerUI();await doSearch();
}

async function doSearch(){
  if(isLoading||!isPoweredOn)return;isLoading=true;clearTimeout(skipTimer);
  const scr=document.getElementById('screen');scr.classList.remove('warping');void scr.offsetWidth;scr.classList.add('warping');
  showStatic();showStatus('‚åÅ WARPING...');document.getElementById('yt-player-wrap').style.opacity='0';
  for(let attempt=0;attempt<3;attempt++){
    try{
      const query=buildFullQuery();
      const results=await doYTSearch(query);
      if(results.length>0){playlist=shuffleArr(results);playlistIdx=0;playCurrent();isLoading=false;return;}
      if(!fillLocked&&getCurEntry().fill){curFill=genFill();updateTunerUI();}
      else if(!queryLocked){shuffleQuery();}
    }catch(err){if(err.message.includes('403'))break;}
  }
  hideStatic();showStatus('NO SIGNAL ‚Äî PRESS D');setTimeout(()=>{hideStatus();showStatic();},2500);isLoading=false;
}

function chUp(){if(!isPoweredOn)return;if(!playlist.length){doWarp();return;}playlistIdx++;if(playlistIdx>=playlist.length){doWarp();return;}playCurrent();}
function chDown(){if(!isPoweredOn)return;if(!playlist.length){doWarp();return;}playlistIdx--;if(playlistIdx<0)playlistIdx=playlist.length-1;playCurrent();}

// ‚ïê‚ïê‚ïê VOLUME ‚ïê‚ïê‚ïê
function setVolume(v){volume=Math.max(0,Math.min(100,Math.round(v)));if(ytReady&&ytPlayer){ytPlayer.setVolume(volume);if(volume===0)ytPlayer.mute();else ytPlayer.unMute();}document.getElementById('knob-vol').style.transform=`rotate(${(volume/100)*270-135}deg)`;document.getElementById('vol-num').textContent=volume;flashVolOSD();}
(function(){const knob=document.getElementById('knob-vol');let dragging=false,startY=0,startVol=0;
knob.addEventListener('mousedown',e=>{dragging=true;startY=e.clientY;startVol=volume;e.preventDefault();});
knob.addEventListener('touchstart',e=>{dragging=true;startY=e.touches[0].clientY;startVol=volume;},{passive:true});
document.addEventListener('mousemove',e=>{if(dragging)setVolume(startVol+(startY-e.clientY)*0.8);});
document.addEventListener('touchmove',e=>{if(dragging)setVolume(startVol+(startY-e.touches[0].clientY)*0.8);},{passive:true});
document.addEventListener('mouseup',()=>{dragging=false;});
document.addEventListener('touchend',()=>{dragging=false;});
knob.addEventListener('wheel',e=>{e.preventDefault();setVolume(volume+(e.deltaY<0?5:-5));},{passive:false});
})();

// ‚ïê‚ïê‚ïê POWER ‚ïê‚ïê‚ïê
function togglePower(){
  if(isPoweredOn){isPoweredOn=false;clearTimeout(skipTimer);document.getElementById('power-led').classList.remove('on');document.getElementById('power-off-screen').classList.add('active');hideStatic();hideStatus();['channel-osd','playlist-counter','vol-osd'].forEach(id=>document.getElementById(id).classList.remove('visible'));if(ytReady&&ytPlayer)ytPlayer.stopVideo();clearInfoStrip();}
  else{isPoweredOn=true;document.getElementById('power-led').classList.add('on');document.getElementById('power-off-screen').classList.remove('active');showStatic();setTimeout(()=>doWarp(),600);}
}

// ‚ïê‚ïê‚ïê SETUP ‚ïê‚ïê‚ïê
function launchApp(){
  const s=document.getElementById('setup-screen');s.classList.add('hidden');
  setTimeout(()=>{document.getElementById('main-container').classList.add('active');resizeStatic();showStatic();setVolume(100);updateModeBadge();
  curMap=pick(MAP_KEYS);curQueryIdx=rand(0,MAPS[curMap].keys.length-1);curFill=genFill();updateTunerUI();
  function go(){if(ytReady)doSearch();else setTimeout(go,200);}setTimeout(go,600);},800);
}

// Restore saved worker URL
try{const saved=localStorage.getItem('graveyard_worker');if(saved)document.getElementById('worker-url-input').value=saved;}catch(e){}
try{const savedKey=localStorage.getItem('graveyard_apikey');if(savedKey)document.getElementById('api-key-input').value=savedKey;}catch(e){}

document.getElementById('worker-btn').addEventListener('click',()=>{
  let url=document.getElementById('worker-url-input').value.trim();
  if(!url){document.getElementById('setup-error').textContent='Paste your Cloudflare Worker URL above';document.getElementById('setup-error').classList.add('visible');return;}
  // Clean up URL
  url=url.replace(/\/+$/,'');
  if(!url.startsWith('http'))url='https://'+url;
  document.getElementById('worker-btn').innerHTML='‚åÅ TESTING...';
  const ctrl=new AbortController();const timer=setTimeout(()=>ctrl.abort(),10000);
  fetch(`${url}?q=test`,{signal:ctrl.signal})
    .then(r=>{clearTimeout(timer);if(!r.ok)throw new Error(`${r.status}`);return r.json();})
    .then(data=>{
      if(data.error)throw new Error(data.error);
      WORKER_URL=url;searchMode='worker';
      try{localStorage.setItem('graveyard_worker',url);}catch(e){}
      launchApp();
    })
    .catch(err=>{
      clearTimeout(timer);
      document.getElementById('worker-btn').innerHTML='‚åÅ CONNECT';
      document.getElementById('setup-error').textContent=`Couldn't reach worker: ${err.message}. Check the URL and that it's deployed.`;
      document.getElementById('setup-error').classList.add('visible');
    });
});
document.getElementById('worker-url-input').addEventListener('keydown',e=>{if(e.key==='Enter')document.getElementById('worker-btn').click();});

document.getElementById('go-btn').addEventListener('click',()=>{
  const key=document.getElementById('api-key-input').value.trim();
  if(!key){document.getElementById('setup-error').textContent='Paste your API key above, or set up a Worker';document.getElementById('setup-error').classList.add('visible');return;}
  API_KEY=key;document.getElementById('go-btn').textContent='TESTING...';
  fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&q=test&key=${key}`)
    .then(r=>{if(!r.ok)throw new Error(`${r.status}`);return r.json();})
    .then(()=>{searchMode='api';try{localStorage.setItem('graveyard_apikey',key);}catch(e){}launchApp();})
    .catch(()=>{document.getElementById('go-btn').textContent='USE API KEY';document.getElementById('setup-error').textContent='Key didn\'t work. Check that YouTube Data API v3 is enabled.';document.getElementById('setup-error').classList.add('visible');});
});
document.getElementById('api-key-input').addEventListener('keydown',e=>{if(e.key==='Enter')document.getElementById('go-btn').click();});

// Mode badge click ‚Äî switch modes
document.getElementById('mode-badge').addEventListener('click',()=>{
  if(searchMode==='worker'&&API_KEY){searchMode='api';updateModeBadge();showError('Switched to API mode');}
  else if(searchMode==='api'&&WORKER_URL){searchMode='worker';updateModeBadge();showError('Switched to Worker mode');}
  else showError('Only one mode configured');
});

// ‚ïê‚ïê‚ïê EVENTS ‚ïê‚ïê‚ïê
MAP_KEYS.forEach(mk=>{document.getElementById('map-btn-'+mk).addEventListener('click',()=>setMap(mk));});
document.getElementById('tuner-query-name').addEventListener('click',togglePicker);
document.getElementById('shuf-query').addEventListener('click',()=>{shuffleQuery();doSearch();});
document.getElementById('shuf-fill').addEventListener('click',()=>{shuffleFill();doSearch();});
document.getElementById('lock-query').addEventListener('click',()=>{queryLocked=!queryLocked;updateTunerUI();});
document.getElementById('lock-fill').addEventListener('click',()=>{fillLocked=!fillLocked;updateTunerUI();});
document.getElementById('warp-btn').addEventListener('click',()=>doWarp());
document.getElementById('ch-up').addEventListener('click',chUp);
document.getElementById('ch-down').addEventListener('click',chDown);
document.getElementById('pwr-btn').addEventListener('click',togglePower);
document.getElementById('power-off-screen').addEventListener('click',togglePower);

// Close picker on outside click
document.addEventListener('click',e=>{if(pickerOpen&&!e.target.closest('.tuner-query'))closePicker();});

document.addEventListener('keydown',e=>{
  const s=document.getElementById('setup-screen');if(!s.classList.contains('hidden'))return;
  if(pickerOpen&&e.key==='Escape'){closePicker();return;}
  switch(e.key){
    case'ArrowUp':case'w':case'W':e.preventDefault();chUp();break;
    case'ArrowDown':case's':case'S':e.preventDefault();chDown();break;
    case'd':case'D':doWarp();break;
    case'q':case'Q':shuffleQuery();doSearch();break;
    case'r':case'R':shuffleFill();doSearch();break;
    case'1':setMap('fresh');break;case'2':setMap('forgotten');break;case'3':setMap('ancient');break;
    case'm':case'M':setVolume(volume>0?0:100);break;
    case'p':case'P':togglePower();break;
  }
});

document.querySelectorAll('.bottom-nav-btn').forEach(btn=>{btn.addEventListener('click',()=>{const target=btn.dataset.panel;const isActive=btn.classList.contains('active');document.querySelectorAll('.bottom-nav-btn').forEach(b=>b.classList.remove('active'));document.querySelectorAll('.bottom-panel').forEach(p=>p.classList.remove('active'));if(!isActive){btn.classList.add('active');document.getElementById(target).classList.add('active');setTimeout(()=>document.getElementById(target).scrollIntoView({behavior:'smooth',block:'nearest'}),50);}});});
window.addEventListener('resize',()=>{if(sAnim)resizeStatic();});
</script>
</body>
</html>
